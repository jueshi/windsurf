Operator's
Manual
SDAIISoftwareSerialDataAnalysisIISoftware Operator's Manual
©2013Teledyne LeCroy,Inc.Allrightsreserved.
Unauthorized duplication ofTeledyne LeCroydocumentation materials otherthanforinternalsalesanddistribution pur-
posesisstrictlyprohibited. However, clientsareencouraged todistribute andduplicate Teledyne LeCroydocumentation
fortheirowninternaleducational purposes.
SerialDataAnalysisIIandTeledyne LeCroyareregistered trademarks ofTeledyne LeCroy,Inc.Windows isaregistered
trademark ofMicrosoft Corporation. Otherproductorbrandnamesaretrademarks orrequested trademarks oftheir
respective holders.Information inthispublication supersedes allearlierversions. Specifications aresubjecttochange
withoutnotice.
922968RevA
May2013Operator's Manual
TABLEOFCONTENTS
SDAIIOverview 2
KeyFeatures 2
SerialDataAnalysisIIDialog 2
SettingUpSDAII 3
QuickView 4
SettingUpQuickView 5
SignalInputs 6
SetUpSignal 6
SerialDataInputs 7
SignalTypes 7
CrossingLevels 7
Reference Clock 9
SetUpReference Clock 9
Reference ClockInputs 10
CrossingLevel 10
ClockTiming 10
ClockRecovery 11
SetUpClockRecovery 11
BitRate 11
Reference Clock 11
PLLSetup 12
ClockRecovery Theory 14
EyeMeasurements 17
EyeMeasure Dialog 17
SetUpEyeDiagram 17
EyeModes 18
MaskTesting 19
EyeDiagramConfiguration Dialog 19
EyeParameters Dialog 21
EyeMeasurement Parameters 21
EyeAnalysisTheory 24
JitterMeasurements 26
SetUpJitterMeasurements 26
JitterFilter 28
PatternAnalysis 29
JitterTrack 30
JitterSpectrum 31
JitterHistogram Analysis 34
JitterParameters 35
922968RevA 1SerialDataAnalysis IISoftware
SDAIIOverview
ThenewSerialDataAnalyzer(SDAII)providescomprehensive measurement capabilities forevaluating
serialdigitalsignals.SDAIIoperates byprocessing alongsignalacquisition. Alljittermeasurements and
displaysarebasedontimesofsuccessive edgesforthesignalonly-nothingisrelativetothetrigger.Asa
result,theyarenotaffectedbytriggerjitter.Acquisitions shouldbelongenoughtoincludeatleast100,
000UIofthesignalundertest(500,000UIormoreisoptimal). Itmaybedesirable toacquirelongerrec-
ordstoseelowfrequency jitter.
Note:Acquisitions canbeuptothefullavailablememorydepthoftheinstrument andmaytakecon-
siderable timetoprocess.
TheSDAIIprocesses includeclockrecovery, eyepatternmeasurement, andjittermeasurement. These
operations areperformed onthesamedatarecord.
KeyFeatures
lSDAIIprovidestwotypesofmeasurements: eyepatterntestingandcomprehensive jitteranal-
ysis(including randomanddeterministic jitterseparation, anddirectmeasurement ofperiodic
jitter,DDj,andDCD).
lManyplottypesforjitterandeyediagramanalysis,including eyediagram, IsoBER,DDjPlot,dig-
italpattern,DDjHistogram, jittertrack,PLLtrack,jitterspectrum (withpeakannotation), spec-
trumthreshold, PjInverseFFT,jitterhistogram, CDF,bathtubandNormalized Q-scalefit.
lFilteredjitterprocesses thetimeintervalerrortrendversustimewithauser-selectable band-pass
filter.Thisfeatureallowsapplyingfiltersinadditiontothehigh-passfilteringeffectoftheclock
recoveryPLL,whichisrequiredforsomeserialdataspecifications.
lIsoBERdisplaystheextrapolated linesofconstant BitErrorRatiodowntotheBERofinterestonan
eyediagram.
lQuickViewprovidesashortcutdisplaying theeyediagram, TIEtrack,bathtubcurve,jitterhis-
togram,NQ-scalecursors,andjitterspectrum allonthescreenatthesametime.
SerialDataAnalysis IIDialog
AccesstheSDAIIdialogbychoosing Analysis→SerialData.
TheSerialDataAnalysisIIdialogshowstheoverallflowforviewingandanalyzing serialdata.Eachblock
intheflowdiagramisabuttonthat,whentouched, displaysitscorresponding dialog.
Themultiplexer switchbutton(ontheSetupClockRecovery button'srespective dialog)allowsyouto
selectclockrecoveryfromtheinputdatasignalor,inthedownposition, aseparateexplicitclocksignal.
Touchthemultiplexer switchbuttontochangethestate.
2 922968RevAOperator's Manual
SettingUpSDAII
Usethefollowing stepstostartyourSDAIIsetup.
1.Ifyouhaven'tdonesoalready,touchAnalysis→SerialDataonthemenubar.
2.OntheSerialDataAnalysisIIdialog,placeacheckmark intheEnableSDAbox.
3.TouchtheSetupSignalInputsbuttontoconfigure yoursignalinputsources,crossinglevels,andsig-
naltype.
Note:TouchtheQuickViewbuttontoquicklysetupandviewyourserialdata.
4.Ifyouarerecovering clockdatafromthedatasignal(thedefaultselection), makesuretheclock
recovery inputmultiplexer switchisintheupposition(clockrecoveryviatheredpath).
Whentheswitchisintheupposition, theSetupRef.Clockbuttonisdisabled(grayedout).
5.TouchtheSetupClockRecovery buttonanddefineclockrecoverysettings,suchasBitRateandPLL
settings.
OR
Ifyouareusinganexplicitreference clock,clicktheclockrecovery multiplexer switchbuttonsothat
theswitchisinthedownposition.
6.TheSetupReference ClockInputsbuttonisthenenabled.Clickthisbuttonandsetupyourreference
clockinputs.
7.OnthefarrightoftheSerialDataAnalysisIIdialog,placeacheckmark intheEnableEyeMeas.box
andclicktheSetupEyeMeasurements button(showing itsrespective dialog)todefineeyemeas-
urementsettings.
8.OnthefarrightoftheSerialDataAnalysisIIdialog,placeacheckmark intheEnableJitterMeas.
boxandclicktheSetupJitterMeasurements button(showing itsrespective dialog)todefinejitter
measurement settings.TheJitterMeasure dialogopensdisplaying anotherflowdiagram.
922968RevA 3SerialDataAnalysis IISoftware
QuickView
TheSDAIIQuickViewshowstheeyediagram, TIEtrack,bathtubcurve,jitterhistogram, NQ-scale,and
jitterspectrum (withpeaksannotated) inasingle,summarized view.
SDAIIQuickView
Youmustspecifyonlytheinputsignalforanalysis.Youcanalsospecifythecrossinglevel.
4 922968RevAOperator's Manual
SettingUpQuickView
FollowthesestepstosetupQuickView.
1.Ifyouhaven'tdonesoalready,touchAnalysis→SerialDataonthemenubarortouchtheSerial
DataAnalyzer buttonontheQuickAccesstoolbar.
2.OntheSerialDataAnalysisIIdialog,touchtheQuickViewbutton.TheSignalInput(s)tobe
Analyzed pop-upwindowopens.
3.OntheSerialDataInput(s)section,ifyouareusingadifferential probe,touchthe1Input(orDiff.
Probe)button.Now,touchinsidetheDatafieldbelowthe1Input(orDiff.Probe)buttonandselect
aninputsourcefromtheSelectSourcepop-upwindow.
OR
Ifyouareusingtwosingle-endedprobestocalculatethedifferential signal,touchtheInput1-Input2
button.Input2issubtracted fromInput1.TouchinsideeachDatafieldandselectasourceforeach
SelectSourcepop-upwindow.
4.Increasethesampling rateofthesignalbytouching insidetheUpsample bydataentryfieldand
enteringtheupsample factor.atthebottomofthescreen.
5.IntheCrossing Levelsection,ifyouwanttosetanabsolutecrossinglevel,touchinsidetheLevelis
fieldandchooseAbsolute fromthepop-upmenu.Then,touchinsidetheAbsLeveldataentryfield
andenterthevoltagelevelatwhichthesignaltimingismeasured atthebottomofthewindow.
OR
Ifyouwanttousearelativelevelsettotheselectedpercentage oneachacquisition, touchinsidethe
LevelisfieldandchoosePercentfromthepop-upmenu.Then,touchinsidethePercentLeveldata
entryfieldandenterthepercentage .atthebottomofthewindow.
Note:YoucantouchtheFindLevelbuttontoautomatically findthelevel.Thelevelisfoundbylocat-
ingthemidpoint betweenthehighestandlowestsignallevelsinthecurrentacquisition.
6.ClickOKtoviewthesummary allononescreen.
922968RevA 5SerialDataAnalysis IISoftware
SignalInputs
SetUpSignal
OntheSerialDataAnalysisIIdialog,touchtheSetupSignalInputbuttontoaccesstheSignalInput
dialog.
SerialDataInput(s)section(1)letsyoudefinetheserialdatainput(s).Ifyouareusingadifferential probe
orifyoursignalisconnected byonecoaxialcable,youcanselect1Input(orDiff.Probe)andspecifythe
inputsourceintheInput1box.Ifyouareusingtwosingle-endedprobesortwocoaxialcables,youcan
selectInput1-Input2andspecifytheinputsourcestousewhencalculating thedifferential signal.For
moreinformation, seeSerialDataInputs.
Crossing Levelsection(2)letsyoutosetthevoltagelevelatwhichthesignaltimingismeasured. The
crossinglevelissetseparately forthedataandclocksignals(ifanexternalclockisselected) andcaneither
beanabsolutevoltageorapercentage ofthesignalamplitude viatherelativeselection. Youcanalsocon-
figureahysteresis level,andbetweenpositive,negativeandbothedgetypesforwhenthe"Clock"Signal
Typeisselected. TheCrossingLevelsectiononthisdialogisforthedatasignal.Formoreinformation, see
CrossingLevels.
SignalTypesection(3)letsyouchooseastandard signaltype.Thesignaltypeyouchooseautomatically
setsthenominalbitratefortheselectedstandard, andpopulates theMaskTypeselectorintheEye
dialog.Formoreinformation, seeSignalTypes.
NoiseSettingsincludessettingsthatareusedbytheverticalnoisemeasurements toolkit.Settings
includetheSamplePhase,whichdetermines whereintheunitintervalthesampleistakenforthenoise
measurement. Also,seeHowtoOrderSDAIII-CompleteLinQ Capabilities forinformation onwhichprod-
uctsincludetheverticalnoiseanalysiscapabilities.
NOTE:
lManyofthemeasurements inSDAIIrequirebothahighsampling rateandlongmemorytocom-
putejitterandverticalnoiseaccurately.
lLowersampling ratescanresultinlessaccuratejittermeasurements, andshortrecordlengthscan
giveincomplete eyepatternsorjitterandnoisedisplaysthatdiverge.
lForbestresults,acquirewaveforms withatleast100,000unitintervals, andof>100iterations of
thepattern.SeeJitterPatternAnalysis.
6 922968RevAOperator's Manual
SerialDataInputs
Thereareseveralscenarios fortheconfiguration oftheSeria Data Input(s)section.
Ifyouareusingadifferential probeorifyoursignalisconnected byonecoaxialcable,usethe1Input(or
Diff.Probe)buttonandselecttheinputsource.
Ifyouhaveadifferential signaltransmitted ontwotwocoaxialcablesortwosingle-endedprobes.,use
theInput1-Input2buttonandselecttheinputchannels used.
NOTE: Thereisnoneedtoconfigure amathfunctiontocalculatethedifference betweentoinputs.Doing
soaddsadditional computational steps,andunnecessarily usesRAM.
Lastly,anymathfunction, memorytrace,etc.canbeusedasaninput,aswellasanyinputchannel.
WheninInput1-Input2mode,andwhenusingtracesthatmayhavebeentheresultofotherprocessing
steps,besurethatbothtraceshavethesamerecordlengthandsamplerate.
Youcanchoosetoupsample rateintheSerialDataInputsdialogbyafactoroftwoinordertoprovidea
highersampledensityforanalysis.InSDAIIthiswastypicallydonetofacilitateformation ofeyediagrams
withoutgapsforbitratesintegrally relatedtothesampling rate(forexample, 20GS/sisexactlyeight
times2.5Gb/s),andespecially forrelatively shortacquisitions. This,however, unnecessarily slowed
downtheanalysisprocess.Whenneedingtoupsample toremovegapsintheeyeusetheupsample con-
trolintheEyeDiagramdialog.
SignalTypes
Thesignaltypedefinesthecompliance masksandbitratefortheselectedstandard.
WhenyoutouchtheSignalTypefield,apop-uptableofstandard signaltypesisshown.Touchthe
desiredsignaltypetopopulate theSignalTypefield.ThelistofsignaltypesistakenfromtheSDA Mask
Database. Asnewserialdatastandards areinvented, masksareaddedtothedatabase.
Whenchoosing CustomfromtheSignalTypepop-upmenu,alwaysenterabitrateintheNominalRate
entrybox.Usinganincorrect NominalRatecanleadtoincorrect equalizer results,sincethisvalueisused
byseveraloftheequalizers thatareavailabletheoscilloscope includesEyeDoctorIIfunctionality. The
Customselection doesnotspecifyanyeyemasks,andtheMaskTypeselectorintheEyedialogwillbe
greyedout.
Crossing Levels
TheCrossing levelsectionoftheSignalInputdialogdetermines thevoltagelevelwherethearrivaltime
ofeachedgeofthesignalismeasured. Thecrossinglevelissetseparately forthedataandclock(ifan
externalclockisselected).. TheCrossingLevelonthisdialogisforthedata.Settingthecrossingleveltoa
valuethatisnotoptimalcanresultinhigherthanexpected deterministic jitter,sincetheerrorinthetim-
ingoftheedgeswillbedifferentforrisingandfallingedges.
TheLevelTypecanbeeitherabsolute orrelative.
TheAbsolute crossinglevelcanbesetdirectlyinvolts(orwattsforanopticalsignal),oryoucanclickthe
FindLevelbuttontoautomatically findthelevel.Thelevelisfoundbylocatingthemidpoint betweenthe
highestandlowestsignallevelsinthecurrentacquisition. WhenyouselecttheAbsolute crossinglevel,
thecrossingtimeusedbyboththejitterandeyepatternmeasurements isdetermined asthetimeat
whichthesignallevelcrossesthespecifiedthreshold. WhenRelativelevelisselected, thelevelisauto-
922968RevA 7SerialDataAnalysis IISoftware
matically setoneachacquisition. Thevaluesetistheselectedpercentage ofthesignalamplitude (which
equalsbase-top).
TheSlopeselectordetermines whichedgesaremeasured when"Clock"isselectedintheSignalType
selectorintheSignaldialog..ThechoicesforslopearePos(itive),Neg(ative)orBothSelectthechoice
thatcorresponds totheedgetypethatisusedforclockingofthedatainyourdevice,orthatisofinter-
estinyouranalysis. Forexample, ifyouonlylatchdataonpositiveedges,selectPos.Ifyouclockon
bothedges,youcanselectPosorNegratherthanbothinordertounderstand howtheedgetypeaffects
thejittermeasurement.
TheHysteresis entryboxsetsthehysteresis leveltouseforedgedetection, inunitsofverticaldivisions.
Thehysteresis istheverticalamountthatthesignalisrequiredtotravelbeyondthecrossinglevelto
allowdetection ofacrossingintheopposite direction. Incorporating hysteresis intheedgedetection
algorithm prevents thesoftwarefromfindingfalseedgesthatwouldotherwise bedetected duetonoise
orothersmallglitchesinthesignal.Thedefaultvalueis500mdiv, or1/2adivision.Whentheinputsig-
nalsareproperlyscaled(i.e.tofillapproximately 90%ofthegrid,vertically, thislevelofhysteresis should
besufficient. Whendealingwithsignalsthatresultinclosedeyes,asmallervalueforhystersis maybe
required.
Moreinformation abouthowtheSDA analysis softwaredetermines theedgetimingusingthecrossing
levelcanbefoundintheClockRecovery Theorysection
NOTE:TheRelativesettingcanpotentially removejitterbytrackingslowlevelshiftsbetweenacqui-
sitions,ifthisisnotdesired,usetheAbsolute levelsetting.
8 922968RevAOperator's Manual
Reference Clock
SetUpReference Clock
Anaccuratereference clockiscentraltothemeasurements performed bySDAII.Whentheclockisrecov-
eredfromdata,theclockisdefinedfromthelocations ofthedata'scrossingpointsintime.Whenaref-
erenceclockisused,theclockisdefinedfromthelocations ofthereference clock'scrossingpoints.
Startingwithzero,theclockedgesarecomputed atspecifictimeintervalsrelativetoeachother.
Example:A2.5GHzclockhasedgesseparated intimeby400ps.Makinga2.5GHzclockfroma100MHz
reference clockrequiressettingtheMultiplier to25.
Followthesestepstodefinethecrossingpoints.
1.TouchAnalysis→SerialDataonthemenubar.
2.OntheSerialDataAnalysisIIdialog,makesurethemultiplex switchnexttoClockRecovery isinthe
downpositiontoselectReference Clock,thentouchtheSetupRefClockbutton.
3.UnderReference ClockInputs,touchtheClock+Onlybutton,thentouchtheClockRef+boxand
selectaninputsourcefromtheSelectSourcepop-upwindow.
OR
TouchtheClock+andClock-button,thentouchtheClockRef+andClockRef-boxesandselecta
sourceforeachfromtheSelectSourcepop-upwindow.
4.Ifyouwanttoincreasethesampling rateofthesignal,touchinsidetheUpsample bydataentryfield
andentertheupsample factor.
5.Tosetanabsolutecrossinglevel,touchinsidetheLevelfieldandchooseAbsolute fromthepop-up
menu.Then,touchinsidetheAbsLeveldataentryfieldandenterthevoltagelevelatwhichthesig-
naltimingismeasured usingeitherthekeypadorthesliderbaratthebottomofthescreen.
OR
Tousearelativelevelsettotheselectedpercentage oneachacquisition, touchinsidetheLevelis
fieldandchoosePercentfromthepop-upmenu.Then,touchinsidethePercentLeveldataentry
fieldandenterthepercentage atthebottomofthescreen.
NOTE:Alternatively, touchFindLeveltoautomatically findthelevel.Thelevelisfoundbylocating
themidpoint betweenthehighestandlowestsignallevelsinthecurrentacquisition.
6.Determine clocktimingbytouching theClockSlopefieldandchoosePositive,Negative,orBoth.
922968RevA 9SerialDataAnalysis IISoftware
Reference ClockInputs
TheReference ClockInput(s)sectionintheRef.ClockInputdialogletsyoudefinetheclockinput(s).You
canchooseClock+OnlyorClock+andClock-.Youcanalsodefinetheupsample rate(whenincreasing
thesampling rateoftheclocksignal).
Crossing Level
TheCrossing levelsectionoftheReference ClockInputsdialogletsyousetthevoltagelevelwheretim-
ingismeasured forthereference clock.Thecrossinglevelissetseparately forthedataandclock(thecon-
trolsonthisdialogarefortheclock)andcanbeeitherabsolute orrelative.
YoucaneithersettheAbsolute crossinglevelinvolts(orwattsforanopticalsignal)directly,oryouclick
theFindLevelbuttontoautomatically findthelevel.Thelevelisfoundbylocatingthemidpoint between
thehighestandlowestclocklevelsinthecurrentacquisition. WhenyouselecttheAbsolute crossing
level,thecrossingtimeusedbyboththejitterandeyepatternmeasurements isdetermined asthetime
atwhichtheclocklevelcrossesthespecifiedthreshold. TheRelativelevelisautomatically settothe
selectedpercentage oneachacquisition.
ClockTiming
TheClockTimingsectionoftheRef.ClockInputdialogletsyoudefineaclockslopesetting.Aclocksignal
goesthroughonecomplete cycleduringeachbitinterval.Theedgetimingcanbemeasured relativeto
therisingslope,fallingslope,orbothslopes,oftheclockbymeansoftheClockSlopesetting.
10 922968RevAOperator's Manual
ClockRecovery
SetUpClockRecovery
Anaccuratereference clockiscentraltoanyjittermeasurement, including allthemeasurements per-
formedbySDAIII-CompleteLinQ. Therecovered clockisdefinedbythetimesatwhichthespecifiedsignal
(eitherdataorreference clock)crossesthespecifiedthreshold. Startingwithzero,theclockedgesare
computed atspecifictimeintervalsrelativetoeachother.A2.5GHzclock,forexample, willhaveedges
separated intimeby400ps.
OntheSerialDataAnalysisIIdialog,touchtheSetupClockRecovery buttontoaccesstheClockRecov-
erydialog.
DataorBitRatesection-Letsyoudefineacustomexpected bitrate,oryoucanclicktheFindRateNow
buttontoautomatically findthebitratefromthesignal.Ifyoudoneither,thisfieldremainssettothe
standard's nominalbitrate.Formoreinformation, seeBitRate.
Reference Clocksection-Enablespositioning oftheclockedgesrelativetothedatasignal.Itshiftsthe
clocksignalrelativetothedatasignal.Forconvenience, itduplicates controlsfoundelsewhere: theUse
ExplicitClockRefcheckbox (servingthesamefunctionasthemultiplexer switchontheSDAIIdialog)and
Multiplier field(alsofoundontheRef.Clockdialog).Formoreinformation, seeReference Clock.
PLLSetup...section-Setsthetypeandbandwidth ofthedigitalPLLusedinSDAIImeasurements. The
PLLbandwidth limitstheresponse oftherecovered clocktohighratevariations inthedatarate.For
example,depending onthetypeofPLL,aPLLbandwidth of5MHzwillallowtherecovered clocktotrack
frequency variations belowapproximately halfthisrate,therebyremoving theireffectfromjitterandeye
patternmeasurements. Configure thissectiontomatchthebehavior ofthereceiver's PLL.
BitRate
TheDataorBitRatesectionoftheClockRecovery dialogletsyoudefineacustomexpected bitrateor
findthebitratefromthesignal.
Reference Clock
TheReference ClocksectionontheClockRecovery dialogallowsyoutoshifttheclockedgesrelativeto
thedatasignal.
922968RevA 11SerialDataAnalysis IISoftware
Thissectionduplicates controlsfoundelsewhere: theUseExplicitClockRefcheckbox (servingthesame
functionasthemultiplexer switchontheSDAIIdialog)andtheMultiplier field(alsofoundontheRef
Clockdialog).
PLLSetup
ThePLLSetupsectionoftheClockRecoverydialogcontainsthecontrolstosetthetypeandbandwidth
ofthedigitalPLLusedinallSDAIImeasurements. ThePLLbandwidth limitstheresponse oftherecovered
clocktohighratevariations inthedatarate.Configure thissectiontomatchthebehavior ofyourreceiv-
er'sPLL.
Example:APLLbandwidth of5MHzallowstherecovered clocktotrackfrequency variations below
approximately halfthefrequency, therefore removing theeffectfromjitterandeyepatternmeas-
urements. ThesoftwarePLLimplemented inSDAIIallowsyoutochooseamongseveraltypesofPLL.
TheselectedPLLisappliedtoeitherthedatastreamundertestortheselectedclocksource(ifaRef-
erenceClockisinuse)whenthePLLOncontrolischecked. ThePLLrecoversareference clockfromthe
selectedsource,whichisusedbyallsubsequent SDAIImeasurements.
PLL Types
FCGOLDEN
FCGoldenisthedefaultselection andimplements thegoldenPLLasdefinedintheFibrechannel spec-
ification.Bydefault,thegoldenPLLissettoacutofffrequency of1/1667timesthebitrateofthesignal
undertest.Thisratiocanbeadjusted from1/10to1/1e6.
Makethefollowing settingsfortheFCGoldenPLLontheGoldenPLLdialogatthefarrightofthescreen:
lTouchinsidetheCutoffDivisorfieldandenteravalueusingthepop-upkeypad.Thedefaultvalue
of1667istheindustrystandard foraGoldenPLLandequalstheratiooftheBitRatetothePLLCut-
offfrequency.
ThePLLcutoffdivisoristhevaluebywhichthebitrateisdividedtocompute thecutofffrequency
fortheloopbandwidth oftheclockrecoveryoperation forsequential eyepattern,jitter,andbit
errorratefunctions. Thiscontrolisvariablefrom10to1,000.AlowPLLcutoffdivisormeansthe
PLLtracksand,therefore, attenuates jitterathigherfrequencies.The defaultvalueof1667causes
theclockrecoverytooperateasagoldenPLL,asdefinedintheFibrechannel specification.
lThePLLCutofffrequency controlreadsthefrequency corresponding totheCutoffDivisor.Alter-
natively,thePLLCutofffrequency maybeprovided andthenearestcutoffdivisoristhencom-
putedfromtheentry.
12 922968RevAOperator's Manual
PCI-EXPRESS
TherearefourPCI-Expressselections thatmeetthefollowing standards:
lPCI-ExpressGen1
lPCI-ExpressGen2A
lPCI-ExpressGen2B
lPCI-ExpressGen2C
DVI
TheDVIselection displaystheDVI PLLdialogatthefarrightofthescreenandfollowstherequirements
oftheDVI(DigitalVideoInteractive) andHDMI(HighDefinition Multimedia Interface) specifications.
Thesespecifications calloutaclockrecoveryfunctionhavingasingle-polePLLloopresponse withacutoff
of4MHz.
FB-DIMM
TheFB-DIMMselection appliesafilterthatreplicates Fully-bufferedDIMM.
USB
TheUSBselection appliesafilterthatmeetstheUSB3.0SSrequirements.
CUSTOM
TheCustomselection showstheCustomPLLdialogonthefarrightofthescreenandallowsyoutoselect
eitherafirstorsecondorderloopresponse. Thefirstorderresponse allowsyoutoselectapole
frequency thatsetsthePLLcutoff,andazerofrequency thatmustbehigherthanthepolefrequency
thatlimitsthestop-bandattenuation.
ThesecondorderPLLallowsyoutoselectthenaturalfrequency anddamping factor.Thedamping factor
determines thetransient behavior ofthephaselockedloopandisvariablefrom2to0.5.
lAdamping factorabove0.707resultsinanunder-dampedresponse andthePLLisover-corrected
toasuddenchangeinfrequency; however, reactsquickertothechange.
922968RevA 13SerialDataAnalysis IISoftware
lAdamping factorbelow0.707providesanunder-dampedresponse thatreactsmoreslowlytosud-
denchangesinfrequency; however, doesnotover-correct.
Thedefaultvalueof0.707represents acriticallydampedresponse thatprovidesthefastestreactiontime
withoutover-correcting.
ThesecondorderPLLwithadamping factorof0.707isspecifiedintheserialATAgeneration IIdocument.
ThistypeofPLLisalsoveryusefulformeasuring signalswithspread-spectrum clockingbecauseitcan
accurately trackandremovethelow-frequency clockspreading whileallowingthesignaljittertobemeas-
ured.Thenaturalfrequency issomewhat lowerthantheactual3dBcutofffrequency givenbytheequa-
tion:
Thequantity
 isthedamping factor,and
 isthenaturalfrequency. Foradamping factorof0.707,
thisrelationship isfc=2.06fn.SettingsfortheCustomPLL:TouchinsidethePolesfieldtoselectthe
orderofthePLL.Thenumberofpolescanbe1or2.
ClockRecovery Theory
Eye,jitterandverticalnoiseanalysisallrequireaclockthatdefinestheboundaries ofeachunitinterval.
Additionally, theclockisusedtodetermine thedifference betweenactualandexpected arrivaltimesof
dataedges(i.e.,thetimeintervalerror,orTIEmeasurements). Inmanyoftoday'shigh-speedserialstand-
ards,theclockisnotaphysicalsignalbutisinsteadderivedfromthedatasignalviaclockrecoveryhard-
wareorsoftware.
YoumayuseaPLLaspartoftheclockrecoveryalgorithm inordertobestemulatethePLLinareceiver.
Therecovered clockisdefinedbyalistoftimesthatcorrespond toexpected edgearrivaltimes.
ThefirststepincreatingaclocksignalthatistrackedbyaPLListocreateadigitalphasedetector. Thisis
simplyasoftwarecomponent thatmeasures thelocationintimewhenasignalcrossesagiventhreshold
value.Evengiventhemaximum sampling rateavailable), interpolation isnecessary inordertoaccurately
determine crossingtimes.Interpolation isautomatically performed bySDAII.Interpolation isnotper-
formedontheentirewaveform; rather,onlythepointssurrounding thecrossinglevelareinterpolated. A
cubicinterpolation isused,followedbyalinearfittotheinterpolated datatofindtheprecisetimethata
datasignaledgetraverses thecrossinglevel(seefigurebelow).
14 922968RevAOperator's Manual
SDAEdgeTimeDetermination
Clockrecoveryimplementation intheSDAisshowninthefollowing figure.Thisalgorithm generates time
valuescorresponding toaclockatthedatarate.Thecomputation followsvariations inthedatastream
beingtestedthroughtheuseofafeedback controlloopcorrecting eachperiodoftheclockbyaddinga
portionoftheerrorbetweentherecovered clockedgeandthenearestdataedge.
ClockRecovery Implementation Using aPLL
Asshowninthepreviousimage,theinitialoutputandtheoutputofthedigitalphasedetectoraresetto
zero.Thenexttimevalueoutputisequaltothenominaldatarate.Thisvalueisfedbacktothecom-
paratoronthefarleftwhichcompares thistimevaluetothemeasured timeofthenextdataedgefrom
thedigitalphasedetector. Thedifference istheerrorbetweenthedatarateandtherecovered clock,and
canalsoincorporate themeasurement ofthenumberofUI'ssincethelastedge (thatis,thelocaltran-
sitiondensity).This difference isfilteredandaddedtotheinitialbaseperiodtothengenerate thecor-
rectedclockperiod.Thefiltercontrolstherateofthiscorrection byscalingtheamountoferrorfedback
totheclockperiodcomputation. ThechoiceoffilterinSDAIIandSDAIII-CompleteLinQ includesasingle-
poleinfiniteimpulseresponse (IIR)low-passfilter(thegoldenPLL,asdefinedbyFibreChannel), a1pole1
zerofilter,anda2pole1zerofilter.Theequation ofthegoldenPLL1polefilteris:
922968RevA 15SerialDataAnalysis IISoftware
Thevalueofykisthecorrection valueforthekthiterationofthecomputation andxkistheerror
betweenthekthdataedgeandthecorresponding clockedge.Noticethatthecurrentcorrection factoris
equaltotheweighted sumofthecurrenterrorandallpreviouscorrection values.Themultiplier valueis
settooneintheSDA,andthevalueofnisthePLLcutoffdivisorsetfromtheSerialDataAnalysisIIdialog.
Thecutofffrequency isFd/n,whereFdisthedatarate.Thisfilterisrelatedtoitsanalogcounterpart
throughadesignprocessknownasimpulseinvariance andisonlyvalidforcutofffrequencies muchless
thanthedatarate.Forthisreason,theminimum PLLcutoffdivisorsettingis20intheSDA.
Thefactorndetermines thenumberofpreviousvaluesofthecorrection valueyusedinthecomputation
ofthecurrentcorrection value.Thisistheoretically infinite;however, thereisapracticallimittothe
numberofpastvaluesincluded.
16 922968RevAOperator's Manual
EyeMeasurements
EyeMeasure Dialog
TheEyeMeasure dialogistheprincipaltoolforsettingupEyediagrams. ClicktheSetupEyeMeas-
urements buttonontheSerialDataAnalysisIIdialogtoaccesstheEyeMeasure dialog.
TheEyeModessectionintheEyeMeasure dialogletsyouchooseaneyemode,eitherSingleEye,Dual
EyeTrans/Non- trans,DualEyeGated,DualEyeFSB.
TheMaskssectionintheEyeMeasure dialogletsyouselectdifferentmodesfortheselectedstandard. A
standard maydefinedifferentmasksfordifferentmeasurement types.TheMaskMarginletsyoudefine
howmuchtoenlargethemask,tomakesurethatyoursignalpassesthemaskplusmargin.
SetUpEyeDiagram
Followthesestepstodefinethetype,shape,andsizeofanEyediagram.
1.OpentheEyeMeasurement dialog.
2.Placeacheckmark intheEnableEyeMeas.checkbox toturnoneyemeasurements.
3.Ifyouwanttoturnofftheeyeparameters display,touchtheTurnOffEyeParams.button.
4.IntheEyeModesection,touchtheModefieldandchooseaneyemodefromthepop-upmenu.
5.TouchtheVerticalAutoFitcheckbox ifyouwanttoscaletheeyepattern.Thesecontrolsaredis-
abled(grayedout)ifthemaskisspecifiedinabsoluteunits(voltsandseconds); thatis,ifthestand-
arddoesnotallowautofit.
Theverticalautofitfunctionsetsthescalingoftheeyepatternsothattheonelevelisatthesecond
verticaldivisionabovecenter,andthezerolevelisattheseconddivisionbelowcenter.TheVertical
Autofitcheckbox isautomatically checkedorunchecked depending ontheselectedSignalType.
Example:WhenanabsolutemasklikeXAUIisselected, theVerticalAutofitcheckbox isunchecked;
however, itischeckedforanormalized masklikeFC1063.
Scalingforabsolutemasksignalsisaccomplished bysettingtheverticalscaleoftheinputsignal.
6.IntheMasksection,touchtheMaskTypefieldandchooseamasktypefromthepop-upmenu.
922968RevA 17SerialDataAnalysis IISoftware
7.TouchinsidetheXfieldandenteravaluefrom0to100%.Asyouenlargethemask'smargin,you
lengthen thehorizontal dimension, bringingthemaskclosertothecrossingpointsofyoureyedia-
gram.Thisreducestheamountofjitterthatcanstillpasstheeye.
8.TouchinsidetheYfieldandenteravaluefrom0to100%.Asyouenlargethemask'sYmargin,you
widentheverticaldimension, bringingthemaskclosertothetopandbottomofyoureyediagram.
Thisreducestheamountofverticaleyeclosurethatcanstillpasstheeye.
9.Marginonlycenterareacheckbox -Checktohaveonlythecenterhexagonordiamond expand
whenthemaskmarginissettoavalueotherthan0%
EyeModes
Therearefoureyemodesyoucanchoosewhensettingupaneyemeasurement:
SingleEye-ThismodeoverlaysalltheUIsfromallacquisitions.
DualEyeTransition/Non- Transition -Dividesthesignal'sUIsintotwoseparateeyes:onescomprised of
UIsstartingwithatransition andonecomprised ofUIswithout.ThePCIestandard referstotheseasTran-
sitionandNon-Transition eyes.Thisdisplaymodeisusefulforthoseserialdatastandards usingmask
testingforbothtypesofeyes(PCIExpressandFB-DIMMPoint-to-Point).
DualEyeGated(Qualified) EyeDiagram-TheGatedEyeDiagrammodeusesaseparatesignal(theGate
orqualifier)tocreatedualeyediagrams basedonthepolarityoftheGate.
DualEyeFSB(FrontSideBus)-Operates similartoSequential mode,butdividestheresultsintotwosep-
arateeyesbasedonwhichofapairofsignalsoccurred first.WhenDualEyeFSBisselected, additional
fieldsarethenshown.
18 922968RevAOperator's Manual
MaskTesting
Masktestingtoeitherabsoluteornormalized maskscanbeperformed withSDAIII-CompleteLinQ. You
candetermine wherethesignalhasviolatedthemask,howmanyfailureshaveoccurred, anddetermine
whichparticular UIisinviolation.
WhenselectingaSignalTypeontheSignaltabforaserialdatastandard, theMasksectionoftheEye
Measure.Eachstandard hasasetofrequiredtests;someofthestandards specifyusingaspecificmask
template. Maskstemplates arestoredinthedatabase fileEyeMaskProps.mdf, whichcanbeeditedvia
theMaskDatabase Editortool.AshortcuttolaunchthistoolcanbefoundintheLeCroyfolderofthe
Startmenu.
Masksareeither"absolute" or"normalized". Absolute masksspecifyspecificvoltageandtimevalues.
Whenusingabsolutemasks,thepositionofmaskfeatureswilldependonthevolts/div settingofthe
mask.Normalized masksreference gridlocations ratherthanabsolutevoltages.
Youcanalsodefinehowmuchtoenlargethemaskinordertoensureyoursignalpassesthemaskplus
someadditional margin.
EyeDiagram Configuration Dialog
TheEyeDiagramright-handdialogletsyouconfigure howtheeyediagramisdisplayed.
ShowEye-Displaystheeyediagram(s).
ShowMask-Displaysthemasktemplate(s).IfCustomorClockischosenfortheSignalTypeintheSignal
tab,thenthischeckbox isgreyedout.(Userscancreatecustommasksbydefininganewsignaltype.)
ShowIsoBER-DisplaysIsoBER,whichprovidesavisualrepresentation oftheextrapolated eyediagram.
Whenyouenablethis,pressStartIsoBERScan.
922968RevA 19SerialDataAnalysis IISoftware
EyeSaturation -Usetheslidertoincreaseordecrease eyesaturation. Thesettingforsaturation adjusts
thecolorgradingorintensity. Slidetothelefttoreducethethreshold requiredtoreachsaturation.
ShowFailures-Placeacheckmark toshowthemaskfailures.Maskfailuresareidentified bycontrasting
colorspotswhichappearanywhere thedataintersects themasktemplate. IfCustomorClockischosen
fortheSignalTypeintheSignaltab,thenthischeckbox isgreyedout.
EyeStyle-Youcanchoosethestyleyouwanttousetodisplaytheeyediagram. Theselections arecolor-
gradedoranalogpersistence. Incolor-gradedpersistence, pixelsaregivenacolorbasedonthepixel'srel-
ativepopulation andtheselectedEyeSaturation. Thecolorpaletterangesfromviolettored.When
analogpersistence, isselected, thecolorusedmimickstherelativeintensitythatwouldbeseenonan
analogoscilloscope.
StartIsoBERScan-Computes theIsoBERcurvesforvaluesbetweenthestartandendBERsyouspecify.
TheIsoBERcurvesdisplaydirectlyontheeyediagramitself.
IsoBER from/to/step -SelecttherangeofBERvaluesforwhichyouwouldliketoshowcontours inthe
ISOBerplot.
Upsample -Increasefrom1toahighernumber(e.g.5)tofillingapsintheeyediagram. Gapscanoccur
whenthebitrateisextremely closetoasubmultiple ofthesampling rate,suchthatthesampling ofthe
waveform doesnotmovethroughout theentireunitinterval.Gapscanalsooccurwhenusingarecord
lengththatdoesnotsampleasufficiently largenumberofunitintervals. (Usingrecordlengthsof>=1mil-
lionpointsisrecommended inordertoacquiretensofthousands, ifnothundreds ofthousands, ofunit
intervals.)
EyediagamwithISOBersuperimposed
20 922968RevAOperator's Manual
EyeParameters Dialog
TheEyeParameters right-handdialogletsyouchoosewhichparameters youwanttoshowonthe
screen.Youcanalsoenteraslicewidth.Theslicewidthisapercentage ofthedurationofasinglebit(the
partofthepatternoverwhichtheextinction ratioismeasured). Settingapercentage valueindicates how
muchofthecentralportionofthebitwidthtouse.
BoththeJitterMeasurements andtheEyeParameters canbeonatthesametime.Theyareshownsep-
aratelyonthetabledisplay.Toturnoffalleyeparameter measurements, touchthe"TurnoffEye
Params" button locatedontheleftsideoftheadjacentEyeDiagramdialog.
JitterMeasurements andEyeParameter display
Note:Theoscilloscope's Measure tablecanalsobedisplayed.
EyeMeasurement Parameters 
Thereareseveralimportant measurements aremadeoneyepatterns. Manystandards specifythemas
partofrequiredtests.Eyemeasurements mainlydealwithamplitude andtiming(outlined laterinthis
section).Forinformation onsettingupeyemeasurements, seeSetUpEyeDiagram.
EyeAmplitude
Eyeamplitude isameasureoftheamplitude ofthedatasignal.Themeasurement ismadeusingthedis-
tribution ofamplitude valuesinaregionnearthecenteroftheeye(the"slicewidth") selectedbytheuser
(normally 20%ofthedistancebetweenthezerocrossingtimes).Thesimplemeanofthedistribution
aroundthe0levelissubtracted fromthemeanofthedistribution aroundthe1level.Thisdifference is
expressed inunitsofthesignalamplitude (normally voltage).Thismeasurement algorithm isbestsuited
toeyediagrams thatarerendered fromopticalratherthanelectricalsignals.Inthepresence ofinter-sym-
bolinterference and/orequalization, itmaynotgivereasonable results.
OneLevel
Simplemeanofthe1orhighstateoftheeyewithintheselectedslicewidth
Zerolevel
Simplemeanofthe0orlowstateoftheeyewithintheselectedslicewidth.
922968RevA 21SerialDataAnalysis IISoftware
EyeHeight
Theeyeheightisameasureofthesignal-to-noiseratioofasignal.Themeanofthe0levelissubtracted
fromthemeanofthe1levelasintheeyeamplitude measurement. Thisnumberismodified bysub-
tractingthreetimesthestandard deviation ofboththe1and0levels.Themeasurement providesanindi-
cationoftheeyeopeningandismadeonthecentralregion(normally 20%,userchangeable) oftheUI
(bitperiod).Thismeasurement algorithm isbestsuitedtoeyediagrams thatarerendered fromoptical
ratherthanelectricalsignals.Inthepresence ofinter-symbolinterference and/orequalization, itmaynot
givereasonable results.
EyeWidth
Thismeasurement givesanindication ofthetotaljitterinthesignal.Thetimebetweenthecrossing
pointsiscomputed bymeasuring themeanofthehistograms atthetwo0crossings inthesignal.Three
timesthestandard deviation ofeachdistribution issubtracted fromthedifference betweenthesetwo
means.Thismeasurement algorithm isbestsuitedtoeyediagrams thatarerendered fromopticalrather
thanelectricalsignals.Inthepresence ofinter-symbolinterference and/orequalization, itmaynotgive
reasonable results.
Extinction Ratio
Thismeasurement, definedonlyforopticalsignals,istheratiooftheopticalpowerwhenthelaserisin
theONstatetothatofthelaserintheOFFstate.Lasertransmitters arenevercompletely shutoffsincea
relatively longperiodoftimeisrequiredtoturnthelaserbackon(therefore limitingtherateatwhichthe
lasercanoperate). Theextinction ratioistheratiooftwopowerlevels(oneverynearzero)anditsaccu-
racyisgreatlyaffectedbyanyoffsetintheinputofthemeasurement system.Opticalsignalsaremeas-
uredusingoptical-to-electricalconverters onthefrontendoftheSDA.AnyDCoffsetintheO/Emustbe
removed priortomeasurement oftheextinction ratio.Thisprocedure isknownasdarkcalibration .The
outputoftheO/Eismeasured withnosignalattached (alsoreferredtoasbeingdark)andthisvalueis
subtracted fromallsubsequent measurements.
EyeCrossing
Eyecrossingisthepointwherethetransitions from0to1andfrom1to0reachthesameamplitude. This
isthepointontheeyediagramwheretherisingandfallingedgesintersect. Theeyecrossingisexpressed
asapercentage ofthetotaleyeamplitude. Theeyecrossinglevelismeasured byfindingtheminimum
histogram widthofaslicetakenacrosstheeyediagraminthehorizontal direction (astheverticaldis-
placement ofthissliceisvaried).
Average Power
Theaveragepowerisameasureofthemeanvalueofthesignal,derivedfromalllevelscontained within
theeyediagram. Itcanbeviewedasthemeanofahistogram ofaverticalslicethroughthewaveform
coveringanentirebitinterval.Unliketheeyeamplitude measurement wherethe1and0histograms are
separated, theaveragepoweristhemeanofbothhistograms combined. Depending onthedatacoding
used,theaveragepowercanbeaffectedbythedatapattern.Ahigherdensityof1s,forexample, results
inahigheraveragepower.Mostcodingschemesaredesigned tomaintain aneven1sdensityresultingin
anaveragepowerthatis50%oftheoveralleyeamplitude.
EyeBER
EyeBERisanestimateofthebiterrorratioismadefromtheeyediagram. Itisderivedfromameas-
urementoftheQ-factor,asdescribed below.
22 922968RevAOperator's Manual
Thismeasurement algorithm isbestsuitedtoeyediagrams thatarerendered fromopticalratherthan
electricalsignals.Inthepresence ofinter-symbolinterference and/orequalization, itmaynotgiverea-
sonableresults.
TheQfactorisameasureoftheoverallsignal-to-noiseratioofthedatasignal.Itiscomputed bytaking
theeyeamplitude (thedifference betweenthemeanvaluesofthe1and0levels)anddividingitbythe
sumofthenoisevalues(standard deviations ofthe1and0levels).
Allofthesemeasurements aretakeninthecenter(usually20%)oftheeye.UserscanshowtheQfactor
viatheMeasure system.
MaskHits
Numberofsampleswherethesignalimpedesthemask.
MaskOut
Numberofsampleswherethesignaldoesnotimpeded themask.
922968RevA 23SerialDataAnalysis IISoftware
EyeAnalysis Theory
Eyediagrams arepersistence maps,whereeachpixelinthemaptakesonacolorthatindicates how
frequently asignalhaspassedthroughthetime(withinaUI)andvoltagespecifiedforthatpixel.Theeye
diagramshowsallvaluesadigitalsignaltakesonduringabitperiod.Abitperiod(orUI)isdefinedbythe
dataclock,sosomesortofdataclockisneededtomeasuretheeyepattern.
EyeDiagram
EyeDiagramming inOlderOscilloscopes
The"traditional" methodofgenerating aneyepatternthatwasusedbeforeoscilloscopes hadtheability
todetermine aneyefromasinglesweepinvolvedbuildingapersistance mapovermanysweeps.Signals
wereacquiredusingthedataclockasatrigger.Oneormoresamplestakenoneachtriggerwerestored
inapersistence mapwiththeverticaldimension equaltothesignallevel,withthehorizontal position
equaltothesamplepositionrelativetothetrigger.Theeyepatternfilledinafteralargenumberofmul-
tipleoccurrences oftimeandamplitude values(counted byincrementing counters ineachx,ybin)forall
thedatapointscollected. Userswouldtypicallyputthetriggerpoint"offscreen",andbuildtheper-
sistancemapuntilitshowedsufficient data.
Timingjitterisindicated bythehorizontal distribution ofthepointsaroundthedatacrossings. Thehis-
togramofthebinsaroundthecrossingpointsprovidesthedistribution ofjitteramplitude. Thistra-
ditionalmethod,unfortunately, includestheoscilloscope's triggerjitter,withtheconsequence thatthe
jitterseenintheeyediagramwasnotjustthejitterinthesignalitself.
Arecovered clockisusedifthereisnoaccesstoadataclock.Inthetraditional method,therecovered
clockisnormally ahardware PLLdesigned tooperateatspecificdataratesandwithacutofffrequency of
Fd/1667. Adrawback ofahardware clockrecoverycircuitisthatjitterassociated withitstriggercircuit
addstothemeasured jitterbycreatinguncertainty inthehorizontal positioning oftheeyepatternsam-
ples.Anotherdrawback isthattheclockrecoveryPLLisnotlikelytobecontrollable, andmaynotmeet
theexactrequirements foraspecificstandard.
24 922968RevAOperator's Manual
EyePatterns
SDAIImeasures eyepatternswithoutusingatrigger.Thisisdoneusingthesoftwareclockrecovery(dis-
cussedinSetUpClockRecovery)todividethedatarecordintosegments alongthetimevaluesofthe
clock.Forthepurposeofdividingthetimelineintosegments, thetimeresolution isessentially infinite.
Thesamplesoccuratfixedintervalsof25or50ps/pt(for40or20GS/ssampling rate).Thesamplesare
positioned relativetotherecovered clockedgetimes,andthesegments delimited bytheclock(theunit
intervalsorbits)areoverlayed byaligningtheclockdelimited boundaries.. Amonochrome orcolorper-
sistencedisplayisusedtoshowthedistribution oftheeyepatterndata.Sincetheunitintevalaredeter-
minedfromtherecovered clockandnotfromtheoscilloscope's triggerposition, thismethoddoesnot
includejitterfromanytriggercircuit.
922968RevA 25SerialDataAnalysis IISoftware
JitterMeasurements
SetUpJitterMeasurements
TouchtheSetupJitterMeasurements buttonontheSerialDataAnalysisIIdialogtoaccesstheJitter
Measure dialog.TheSDAIIjitteranalysisfollowsaflowofevents.
ThemainJitterMeasure dialogshowsthebasicflowofthejitteranalysisthroughasimpleblockdiagram
progressing fromlefttoright.Eachblockinthediagramisalsoabutton.Touching anyofthebuttons
opensitscorresponding righthanddialog.
JitterMeasurements flowdiagram dialog
SDAIIjitteranalysistechniques aredescribed inthefollowing topics.Themainpartsofthisflowcor-
respondtotheblockdiagramonthemainJitterMeasure dialog.
Acomprehensive whitepaperdescribing howjitterismeasured, SDAIIIJitterCalculation Methods,on
theTeledyne LeCroywebsite.
EnableJitterMeasure
Ifthischeckbox isunchecked, itturnsoffalltracesandparameters. However, thesetupremainsineffect.
Whenchecked, thetracesandparameters remainunchanged.
TIETrend
NOTE: ThereisnoblockorbuttonforTIETrendonthedialog.However, theTIE trend iscalculated inthe
background.
First,theTIEtrendiscalculated, whichisthedeviation ofeachedgefromtheidealprovided bytherecov-
eredclock.SeeSetUpClockRecovery.
JitterFilter
1.TheTIEtrend,whichonlyhasasampleforeachedgeintheinputwaveform, isconverted towhatwe
callatrackorTIETrack, whichisuniformly sampledateveryUI,byinsertinginterpolated samplesfor
eachUIwheretherewasnoedge(virtualedge).Thetrackisalsogivenatimeaxis.TheTIEcannowbe
filtered.
2.Thisstepallowsabandpass filterbeappliedtotheTIETrack. UsetheFilterModetoturnthefunction
OnorOff.YoucanspecifyaLowPassCutoff,HighPassCutoff,andaTransition Width.
3.AnyJitterfilteredfromtheJitterTrackatthispointisnotpassedontoanyofthedownstream anal-
ysis.
26 922968RevAOperator's Manual
PatternAnalysis
1.Firstthedatapatternisfound.
2.Then,aDDjanalysisisperformed ontheTIEtrend.TheaverageTIEiscalculated foreachDDjclass.
TheDDjclassescanbedefinedeitherbywheretheedgeoccursinarepetitive patternorbytheN-bit
sequence occurring priortotheedge.
3.Fromthisanalysis,alistofDDjvaluesandpopulations iscreatedforeachclassification madefrom
step1.
4.Fromthisanalysis,thefollowing arecalculated:
lDDjhistogram
lDDjplot
lDDjparameter
lDCD(DutyCycleDistortion )parameter
lISIparameters
5.TheDDjisremoved fromeachedgeintheTIETrend(according totheirclassification fromstep1)to
createanRjBUjTIETrend(RjBUjTrend), aTIEsequence (inwhichtheDDjisremoved, butstillcon-
tainsallthe(Rj)Randomjitter,andthe(BUj)Bounded- Uncorrelated jitter).Themostcommon case
ofBUjisperiodicjitter,wheretheperiodisunrelated tothedatarate.
JitterTrack
1.Inthisstep,theRjBUjTrend isconverted toatrack(RjBUjTrack) byinsertinginterpolated samples
intotheRjBUjTrendforeachUIwheretherewasnoedge,therebyyieldingauniformly sampledTIE
waveform withasampleforeveryUIandatimeaxis.
2.Thisfunctionprovidesthecapability toshow/hide theRjBUjTrack ,theTIETrack,andthePLLTrack.
ThePLLTrackshowsthejittertrackedoutbythePLLcompared toanidealclockoffrequency (found
bytheFindBitRatefunction).
JitterSpectrum
1.ThespectralanalysissteptakestheFFToftheRjBUjTrack (DDjremoved). NoticehowtheJitterSpec-
trumisshowingmagnitude. Therefore, togetpeak-to-peakjitteryoumustmultiplyby2.
2.Thebackground ofthespectrum isestimated andintegrated togetaspectrally derivedRandom
jitter,Rj(sp).IfthejittermodelselectedintheJitterParamsdialogisDual-DiracSpectral,thenthisis
theRjusedinthejitterbreakdown.
3.Thepeaksinthespectrum areidentified andusedforfurtherperiodicjitteranalysis.
4.Aversionofthespectrum iscreatedwhichonlykeepsthepeaksabovethethreshold.
5.TheinverseFFT(PjInvFFT) ofthepeaksonlyspectrum iscreated.Thepeak-to-peakPjismeasured
fromthiswaveform.
JitterHistogram
UpdatetheTIEhistogram andtheRj+BUjhistogram withthevaluesintheTIETrend andtheRjBUjTrend,
respectively. Formultipleinputwaveforms, thehistogram continues toaccumulate untiltheClear
SweepsFrontPanelbuttonispressed.
922968RevA 27SerialDataAnalysis IISoftware
JitterParameters
Thefitextrapolation fortheNQ-scalemodelcanbeshownonthehistogram fortheNQ-scalemodel.
TheRj+BUjjitterdistribution withtheanalytical tailextrapolations isthenconvolved withtheDDjdis-
tribution (foundduringthePatternAnalysisStep)tocreatethetotaljitterdistribution. Thisisintegrated
togivethejitterCDF.ThejittertimeatwhichtheCDFcrossesthepointcorresponding totheBiterror
rateofinterest(usually10-12)iscalculated foreachsideofthedistribution. Thedifference ofthose2
valuesisTj(BER).
TheDual-Diracmodelisfittotheextrapolated CDFtoyieldthefinalDj(d-d)andRjinthecaseoftheNQ-
Scale.FortheSpectraltechnique, RjisforcedtoRj(sp)andDj(d-d)isdetermined fromtheDual-Diraccon-
straint.
Thejitterparameters explained hereareindependent ofthejittermodelselectedbecausetheyaredeter-
minedbeforethefinalhistogram analysis.
lISIisthelargeroftherange(max-min)ofthe2subsetsoftheDDJhistogram forneg-
ativeedgesorpositiveedges.
lDCDisthedifference inthemeansofthehistograms forthepositiveandnegative
edges.
lDDjistherange(max-min)oftheDDjdistribution forbothpositiveandnegative
edges(andincludestheDCDeffect).
lPjisthepeak-to-peakvalueofalltheperiodicjitterobtained fromtheIFFTofthe
peaks.
JitterFilter
Youcanoptionally applyeitheralow-,high-,orband-passfiltertotheTIE-vs.-timedatameasured onthe
signalundertest(configured ontheSignalInputdialogoftheSerialDataconfiguration screens). Thefilter
isappliedasanFFT.Userscanconfigure thelowandhighfrequencies used,alongwiththeslopeofthe
transitions indBperoctavedetermining thedrop-offbetweenthepassbandandstopband(s).
TheJitterFilterright-handdialogisaccessed usingtheJitterConfiguration buttonontheMainSerial
Datadialog.AccesstheSerialDatadialogbyselectingAnalysis→SerialDatafromthemenubar.
FilterState-TurnstheFilterOnorOff.
FilterType-UsethiscontroltochooseLowpass, Highpass, orBandpass asdesired.
dBperOctave-Usethiscontroltospecifytheslopeofthetransition fromthepassbandtothestop
band.
28 922968RevAOperator's Manual
CutoffFreq(1) -Shownwhenanyfiltertypeisselected.
CutoffFreq(2)-ShownonlywhentheBandpass FilterTypeischosen.
PatternAnalysis
TheDDjismeasured byfindingtheaveragecrossingtimeforeachedgeinthedatapatternandcom-
paringthistothenominalcrossingtime,basedontheexpected bitrateofthesignalundertest.This
measurement requiresarepeating datapatterntooperate.Ifthedatapatterninthesignaldoesnot
repeatatleastonceintheacquireddatarecord,theDDjparameter willindicatezeroeventhoughthis
typeofjitterispresent.Agraphical displayoftheDDjcanbeviewedbyclickingtheShowDDjPlotbutton
onthePatternAnalysismini-dialog.Thisdisplayshowsthepositionerroroftheaveragecrossingpoint
foreachedgeinthepattern.Adigitalrepresentation ofthepatterncanalsobedisplayed onthescreen
byclickingtheShowDigPattbuttononthePatternAnalysismini-dialog.HavingtheDigitalPatternand
theDDjPlotonthescreenatthesametimeisusefultobeabletoidentifyexactlywhereinthepattern
DDjisfound.Additionally, ahistogram ofalloftheDDjvaluescanbedisplayed byclickingontheShow
DDjHistogram button.
Anotherviewthatisavailableisthe ISIPlot.Thisplotshowsaneyepatternconsisting oftheaveraged
waveform tracefromeachpatterninthedatastreamofaspecifiedlength.Thislengthcanbeadjusted
from3to12bits.Thisaveraging removestheeffectsofrandomjitterinthesignal.Whatisleftisaneye
diagramwithallnoiseandrandomjitterremoved. AllthatremainsistheIntersymbol Interference (ISI)
andtheDutyCycleDistortion (DCD).Additionally, aspecificpatterncanbeselectedtobehighlighted on
theISI Plot.
Arepeating datapatternisnotalwayspresent.Inthesecasesanalternate methodofmeasuring data
dependent jitterthatdoesnotrelyonarepeating patterncanbeused.Inthisalternate method,the
averageTIEforiscalculated foredgeswithsimilarpatternsofpreceding Nbits.Thismethodisturnedon
byunchecking theRepeating Patterncheckbox.
PatternAnalysis Dialog
ShowDDjPlot-CheckthisboxtodisplaytheDDjPlot.
ShowDigPatt-CheckthisboxtodisplaytheDig.Pattern.
ShowDDjHistogram -CheckthisboxtodisplaytheDDjHistogram.
ShowISIPlot-CheckthisboxtodisplaytheISI Plot.
FindPattern-Touchtoautomatically findthepattern.
922968RevA 29SerialDataAnalysis IISoftware
Length-Specifythelength..
AutoClear-Checkthisboxtoautomatically cleartheselections.
ClearSweeps-Clickthisbuttontoclearsweeps.
Repeating Pattern-Checkthisboxtorepeatthepattern.
MinPatt.Reps.-Usedtosettheminimum numberofrepetitions ofapatternneededintheinputwave-
form.Awarningisshowniflessthantheminimum settingisprovided.
AutoFindPattern-Checkthisboxtoautomatically findthepattern.
DDjHistoEdges-AllowstheusertospecifywhichedgesareincludedintheDDjHistogram.  The choices
arePositive,NegativeorBoth.
PatternDialog
ShiftPatternBy-AllowstheusertoshifttheDigitalPatternplotinmultiples ofUI.
NumBits-AllowstheusertoselectthenumberofbitstouseinthecreationoftheISI Plot.
ISI PlotPatternSelect-Allowstheusertoselectaspecificpatterntobehighlighted intheISI Plot.
JitterTrack
Thisdialogisusedtodisplayanyofthethreeavailablejittertrackresults.Iftheboxischecked, theTrack
isplotted.Allthreejittertracksplotjitterversustime.Inordertozoomanyoftheseplots,firsttouchor
clickonthetracedescriptor, andthentouchorclickonthezoomtab(ontheminidialogontherightside
ofthescreen).
ShowRjBUjTrack -PlotstheRjBUjTrack. Thiswaveform istheTIETrackwiththeDDjremoved, andwith
valuesfor"virtualedges"
30 922968RevAOperator's Manual
ShowPLLTrack-PlotsthejitterthatthePLListrackingout.Thisisrelativetoaidealclockatthefoundbit
rate.PLLTrackwaveform showsthebehavior ofthePLLtotrackoutlowfrequency jitterinyoursignal.It
showsawaveform thatincludes, foreachedge(realorvirtual)inyoursignal,ameasurement ofthedif-
ferencebetween(1)theexpected arrivaltimeoftheedge,asdetermined bythePLL,and(2)theexpected
arrivaltimeoftheedgeifthePLLwasnotturnedon.
ShowTIETrack-PlotstheTIETrack.
JitterSpectrum
Touching theJitterSpectrum buttonontheJitterMeasurement dialogdisplaystheJitterSpectrum
right-handdialog.
ShowRjBUjSpectrum -Checking thisboxdisplaystheRjBUjSpectrum. Thisplotdisplaysthefrequency
spectrum ofthesignalwiththeDDjremoved.
ShowPeakThreshold -Checking thisboxdisplaysthethreshold fortheRjBUjSpectrum. Peakshigher
thanthisthreshold areconsidered Pjandtheremaining signalunderthethreshold isintegrated toform
theRjofthespectralmethodofjittercomposition.
ShowPjInv.FFT -Checking thisboxdisplaysthePjInverseFFT.ThisplotistheinverseFFTofonlythe
pointsoftheRjBUjSpectrum abovethethreshold. Thisallowsyoutoviewthepeaksinthetimedomain
andisveryusefulforviewingtimedomainPjeffects.
FindScaleforSpectrum -Clickingthisbuttonautomatically findstheoptimalscaleforviewingtheRjBUj-
Spectrum.
Spect.Scale-ChoosewhethertoviewtheRjBUjSpectrum onalinearorlogarithmic scale.
ShowPeaks-Checking thisboxdisplaysthepeaksoftheRjBUjSpectrum. Thisannotates thepointsof
theRjBUjSpectrum abovethethreshold.
922968RevA 31SerialDataAnalysis IISoftware
RjBUjSpectrum
Whendisplaying theRjBUjSpectrum, thespectralanalysistakestheFFToftheRjBUjTrack (DDj
removed). NotetheJitterSpectrum isshowingmagnitude; togetpeak-to-peakjittermultiplied by2.
RjBUjSpectrum Analysis
32 922968RevAOperator's Manual
PeakThreshold
PeakThreshold viewenablesyoutoknowwhatpeaksareviewedasPjfordownstream analysis.
Spectrum withThreshold andPeakAnnotation
PjInv.FFT
ThePjInverseFFTturnsacomplexfrequency viewofthepeakinformation intoasimpletimedomain
viewoftheusersPj(PeriodicJitter).
PjInverseFFT
922968RevA 33SerialDataAnalysis IISoftware
JitterHistogram Analysis
Twojitterhistograms canbeviewedinSDAII,theTIEhistogram ,whichcontainsallsourcesofjitter,and
theRj+BUjhistogram ,whichhastheDDjremoved.
Theintegrated histogram ortheCDF(cumulative distribution function) canalsobeviewed.TheCDFcan
alsobedisplayed inthemorestandard representation ofabathtubcurve.Zoominonanyoftheplots
bytouching thetracedescriptor, andthenselectingthezoomtabontherightsidedialog.Thefollowing
pictureshowstheHistogram Analysisdialog.
ShowRj+BUjHistogram -DisplaysRj+BUjHistogram. Verticalaxisisinnumberofedgesinaparticular
jitterbin.Horizontal axisistheRjBUjjittervalue.Scaleislinear.Sometimes it'susefultousethelog10
mathfunctiontogetalogverticalscaletomakeiteasiertoviewthetails.
ShowTIEHistogram -DisplaysTIEHistogram. Verticalaxisisinnumberofedgesinaparticular jitterbin.
Horizontal axisistheTIEjittervalue.Scaleislinear.Sometimes it'susefultousethelog10mathfunction
togetalogverticalscaletomakeiteasiertoviewthetails.
ShowQ-FitforRjBUj-Plotsthehistogram intheQ-Scalerepresentation. IntheQ-Scalerepresentation,
Gaussian tailsresultinstraightlineswhoseslopeisequalto1/Rj.Teledyne LeCroyusesaspecialQ-scale
whichwecallnQ-Scaleornormalized Q-Scale.ThisallowsforGaussian distributions withvariablepop-
ulationsornormalizations. ShownwiththeQ-scaletransform isthebeststraightlinefit( thethinwhite
line).
ShowCDF-PlotstheCumulative Distribution Function fortheextrapolated RjBUjhistogram convolved
withtheDDjhistogram.
ShowBathtub-Plotsthebathtub(sameinformation asCDF,showninbathtubformat).
34 922968RevAOperator's Manual
JitterParameters
TouchtheJitterParameters buttonontheJitterMeasurement dialogtodisplaytheJitter
Parameters dialogandselecttheparameters todisplayonthereadouttable.
Dual-DiracSpectralRj+DjCDF Fit-IfSpectralisselected, thenspectralanalysisisusedtodetermine a
sigmavaluetofitthetailsofRjBUjHist, andthepositions oftherightandleftGaussians, mu_leftand
mu_rightareobtained fromabestfit.Thistechnique givesthefastestconvergence andistherightone
touseexceptincaseswherecrosstalk orotherkindsofdeterministic jitterexistthatcanmasquerade as
randomjitter.InthosecasesNQ-Scaleshouldbeused.Ingeneralifthe2techniques areclose,usethe
spectraltotakeadvantage ofit'srapidconvergence, iftheydifferbymorethanalittle,thentheassump-
tionsofthespectralmodelareprobably beingstretched anditwouldbebettertousetheNQ-Scale.
Dual-DiracNQ-Scale-IfNQ-Scaleisselected, thenthereare3freeparameters thatarefittoobtaineach
tailGaussian: (1)themeanormu,(2)thesigma,and(3)thepopulation. AseparateGaussian isfitfor
boththeleftandrightsideofthedistributions, sothereare6parameters inall.Usethistechnique in
caseswheredeterministic jittercanmasquerade asrandomjitter,suchaswhennon-repetitive crosstalk
ispresent.IftheNQ-scaleisshowingsignificantly lessRjthantheSpectralmethod,theNQ-scaletech-
niquewillgiveamoreaccuratemeasurebecausetheSpectralmethodisprobably misidentifying DjasRj.
Log10BER-ThiscontrolsetstheBERatwhichtheTjisreported, 10^-12bydefault.
ShowPj-Thep-pvalueofalltheperiodicjitterobtained fromtheIFFTofthespectralPjpeaks.
ShowDDj-Therange(max-min)oftheDDjdistribution forbothpositiveandnegativeedges(and
includestheDCDeffect).
ShowDCD-Thedifference inthemeansofthehistograms forthepositiveandnegativeedges.
ShowISI-Thelargeroftherange(max-min)ofthe2subsetsoftheDDJhistogram fornegativeedgesor
positiveedges.
ShowRate-DisplaystheJitterRate.
TurnOffAll-Touchthisbuttontoturnoffalljitterparameters.
922968RevA 35